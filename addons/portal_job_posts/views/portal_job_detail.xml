<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="custom_job_detail_layout" inherit_id="website_hr_recruitment.detail" name="Custom Job Detail Page">
        <xpath expr="//div[@t-field='job.website_description']" position="replace">
            <div class="container py-5">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="oe_structure mb-5" t-field="job.description" placeholder="Job Description..."/>

                        <div t-if="skills_by_type" class="skills_section">
                            <h2 class="mb-4">What We're Looking For</h2>

                            <div class="row">
                                <div t-foreach="skills_by_type" t-as="skill_type" class="col-lg-6 mb-4">
                                    <div class="card h-100 shadow-sm border-light">
                                        <div class="card-body">
                                            <h5 class="card-title d-flex align-items-center mb-3 fw-bold">
                                                <i class="fa fa-star fa-fw me-2 text-primary"/>
                                                <span t-esc="skill_type.name"/>
                                            </h5>
                                            <div class="d-flex flex-wrap gap-2">
                                                <t t-foreach="skills_by_type[skill_type]" t-as="skill">
                                                    <span class="badge rounded-pill bg-body-tertiary text-dark fw-normal px-3 py-1" t-esc="skill.name"/>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 ps-lg-5">
                        <div class="card bg-light p-4" style="position: sticky; top: 100px;">
                            <h3 class="mb-3">Job Summary</h3>
                            <hr class="mb-4"/>
                            <div t-if="job.no_of_recruitment >= 1" class="d-flex align-items-start mb-3">
                                <i class="fa fa-users fa-fw me-3 mt-1 text-primary"/>
                                <div>
                                    <strong>Open Positions</strong><br/>
                                    <span t-field="job.no_of_recruitment"/>
                                </div>
                            </div>
                            <div class="d-flex align-items-start mb-3">
                                <i class="fa fa-map-marker fa-fw me-3 mt-1 text-primary"/>
                                <div>
                                    <strong>Location</strong><br/>
                                    <span t-field="job.address_id" t-options='{"widget": "contact", "fields": ["city", "country"], "no_tag_br": True, "null_text": "Remote"}'/>
                                </div>
                            </div>
                            <div t-if="job.department_id" class="d-flex align-items-start mb-3">
                                <i class="fa fa-sitemap fa-fw me-3 mt-1 text-primary"/>
                                <div>
                                    <strong>Department</strong><br/>
                                    <span t-field="job.department_id.name"/>
                                </div>
                            </div>
                            <div t-if="job.contract_type_id" class="d-flex align-items-start mb-3">
                                <i class="fa fa-suitcase fa-fw me-3 mt-1 text-primary"/>
                                <div>
                                    <strong>Employment Type</strong><br/>
                                    <span t-field="job.contract_type_id.name"/>
                                </div>
                            </div>
                            <div t-if="job.job_details" class="mt-3">
                                <hr/>
                                <strong>More Details:</strong>
                                <div class="text-muted" t-field="job.job_details"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>
</odoo>