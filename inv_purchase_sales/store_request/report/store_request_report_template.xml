<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="action_report_store_request" model="ir.actions.report">
    <field name="name">Store Requisition Note</field>
    <field name="model">store.request</field>
    <field name="report_type">qweb-pdf</field>
    <field name="report_name">store_request.report_store_request_document</field>
    <field name="report_file">store_request.report_store_request_document</field>
    <field name="print_report_name">'Store Requisition Note - %s' % (object.name)</field>
    <field name="binding_model_id" ref="model_store_request" />
    <field name="binding_type">report</field>
  </record>

  <template id="report_store_request_document">
    <t t-call="web.html_container">
      <t t-foreach="docs" t-as="o">
        <t t-call="web.external_layout">
          <!-- STYLE CHANGE: Removed 'font-weight: normal' and adjusted padding to match template 1 -->
          <div class="page"
            style="font-family: 'Noto Sans Ethiopic', 'Times New Roman', serif; font-size: 12px; padding: 0 30px;">

            <div class="oe_structure" />

            <t t-set="doc_title" t-value="'Store REQUISITION FORM'" />
            <t t-set="doc_number" t-value="o.name" />
            <t t-set="issue_number" t-value="'1'" />

            <!-- Header Section with precise positioning -->
            <!-- STYLE CHANGE: Removed inline font style to inherit from parent. Changed labels to
            <strong> -->
            <div
              style="font-family: 'Noto Sans Ethiopic', 'Times New Roman', serif; font-size: 12px; padding: 0 30px;">
              <div style="margin: 20px;">
                <div style="text-align: right; margin-bottom: 20px;">
                  <div style="margin-bottom: 10px;">
                    <strong>IMRN Date</strong>
                    <span
                      style="border-bottom: 1px solid black; width: 150px; display: inline-block; margin-left: 10px;">
                      <span t-field="o.requested_date" t-options='{"format": "MM/dd/yyyy"}' />
                    </span>
                  </div>
                  <div>
                    <strong>IMRN No</strong>
                    <span
                      style="border-bottom: 1px solid black; width: 150px; display: inline-block; margin-left: 10px;">
                      <span t-field="o.name" />
                    </span>
                  </div>
                </div>
                <div style="margin-bottom: 20px;">
                  <strong>Department/section/Division</strong>
                  <span
                    style="border-bottom: 1px solid black; width: 400px; display: inline-block; margin-left: 10px;">
                    <span t-field="o.department_id.name" style="padding-left: 5px;" />
                  </span>
                </div>
                <div style="margin-bottom: 20px;">
                  <strong>Purpose</strong>
                  <span
                    style="border-bottom: 1px solid black; width: 400px; display: inline-block; margin-left: 10px;">
                    <span t-field="o.purpose" style="padding-left: 5px;" />
                  </span>
                </div>
                <div style="margin-bottom: 20px;">
                  <strong>Contract/Project Reference</strong>
                  <span
                    style="border-bottom: 1px solid black; width: 400px; display: inline-block; margin-left: 10px;">
                    <span t-field="o.project_id" style="padding-left: 5px;" />
                  </span>
                </div>
              </div>

              <table class="table table-bordered"
                style="border: 1px solid black; page-break-inside: auto;">
                <!-- STYLE CHANGE: Added background color to thead and font-weight to header row -->
                <thead style="background-color: #f2f2f2; display: table-header-group;">
                  <tr style="font-weight: bold;">
                    <!-- STYLE CHANGE: Changed padding from 4px to 2px and removed inline font-size -->
                    <th class="text-center"
                      style="width: 5%; border: 1px solid black; padding: 2px;">
                      S.No
                    </th>
                    <th class="text-center"
                      style="width: 15%; border: 1px solid black; padding: 2px;">
                      Item No
                    </th>
                    <th class="text-center"
                      style="width: 40%; border: 1px solid black; padding: 2px;">
                      Description
                    </th>
                    <th class="text-center"
                      style="width: 10%; border: 1px solid black; padding: 2px;">
                      UOM
                    </th>
                    <th class="text-center"
                      style="width: 15%; border: 1px solid black; padding: 2px;">
                      Qty. Requested
                    </th>
                    <th class="text-center"
                      style="width: 15%; border: 1px solid black; padding: 2px;">
                      Remarks
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <t t-set="row_count" t-value="0" />
                  <t t-foreach="o.request_line_ids" t-as="line">
                    <t t-set="row_count" t-value="row_count + 1" />
                    <tr style="page-break-inside: avoid;">
                      <!-- STYLE CHANGE: Changed padding from 4px to 2px and removed inline
                      font-size -->
                      <td class="text-center"
                        style="border: 1px solid black; padding: 2px; height: 35px;">
                        <span t-esc="row_count" />
                      </td>
                      <td style="border: 1px solid black; padding: 2px;">
                        <span t-field="line.product_id.default_code" />
                      </td>
                      <td style="border: 1px solid black; padding: 2px;">
                        <span t-field="line.product_id.name" />
                      </td>
                      <td class="text-center"
                        style="border: 1px solid black; padding: 2px;">
                        <span t-field="line.product_uom.name" />
                      </td>
                      <td class="text-end"
                        style="border: 1px solid black; padding: 2px;">
                        <span t-field="line.product_uom_qty" />
                      </td>
                      <td style="border: 1px solid black; padding: 2px;">
                        <span t-field="line.remark" />
                      </td>
                    </tr>
                  </t>
                </tbody>
              </table>

              <div class="footer-block"
                style="margin-top: 20px; padding-top: 5px;">
                <div class="row" style="margin-top: 15px;">
                  <div class="col-8 d-flex align-items-end">
                    <strong style="white-space: nowrap;">Recieved by Name</strong>
                    <div
                      style="flex-grow: 1; border-bottom: 1px solid black; margin-left: 8px; min-height: 20px;">
                      <span t-field="o.requested_by.name" style="padding-left: 15px;" />
                    </div>
                  </div>
                  <div class="col-4 d-flex align-items-end">
                    <strong style="white-space: nowrap;">Sig.</strong>
                    <div style="flex-grow: 1;  margin-left: 8px; min-height: 20px;">
                      <t
                        t-if="o.warehouse_id.storeman_id.employee_id.emp_signature">
                        <img
                          t-att-src="'data:image/png;base64,%s' % (o.warehouse_id.storeman_id.employee_id.emp_signature.decode())"
                          style="max-height:60px; max-width:180px;" />
                      </t>
                    </div>
                  </div>
                </div>
                <div class="row" style="margin-top: 15px;">
                  <div class="col-8 d-flex align-items-end">
                    <strong style="white-space: nowrap;">Approved by Name</strong>
                    <div
                      style="flex-grow: 1; border-bottom: 1px solid black; margin-left: 8px; min-height: 20px;">
                      <span t-field="o.approved_by.name" style="padding-left: 15px;" />
                    </div>
                  </div>
                  <div class="col-4 d-flex align-items-end">
                    <strong style="white-space: nowrap;">Sig.</strong>
                    <div style="flex-grow: 1;  margin-left: 8px; min-height: 20px;">
                      <t
                        t-if="o.approved_by.employee_id.emp_signature">
                        <img
                          t-att-src="'data:image/png;base64,%s' % (o.approved_by.employee_id.emp_signature.decode())"
                          style="max-height:60px; max-width:180px;" />
                      </t>
                    </div>
                  </div>
                </div>

                <!-- STYLE CHANGE: Applied border-top, padding-top, margin-top, font-size, and
                <strong> label like template 1 -->
                <div
                  style="font-size: 11px; text-align: center; margin-top: 40px; border-top: 1px solid black; padding-top: 5px;">
                  <div style="padding-top: 5px;">
                    <strong>distribution:-</strong>
                    <span style="margin-left: 20px;">Original - Store</span>
                    <span style="margin-left: 20px;">1st Copy Finance</span>
                    <span style="margin-left: 20px;">2nd Production</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </t>
      </t>
    </t>
  </template>
</odoo>